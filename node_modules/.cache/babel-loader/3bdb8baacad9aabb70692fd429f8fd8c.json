{"ast":null,"code":"import _defineProperty from \"/Users/JesonLeejunzhen/ideaclone/ideaboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/JesonLeejunzhen/ideaclone/ideaboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/JesonLeejunzhen/ideaclone/ideaboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/JesonLeejunzhen/ideaclone/ideaboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/JesonLeejunzhen/ideaclone/ideaboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/JesonLeejunzhen/ideaclone/ideaboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/JesonLeejunzhen/ideaclone/ideaboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/JesonLeejunzhen/ideaclone/ideaboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/JesonLeejunzhen/ideaclone/ideaboard/src/components/IdeasContainer.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Idea from './Idea';\nimport update from 'immutability-helper';\nimport Color from './Color';\nimport { ActionCable } from 'react-actioncable-provider';\n\nvar IdeasContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(IdeasContainer, _Component);\n\n  function IdeasContainer(props) {\n    var _this;\n\n    _classCallCheck(this, IdeasContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(IdeasContainer).call(this, props));\n    _this.state = {\n      ideas: [],\n      editingIdeaID: null,\n      editingTitleID: null,\n      notification: '',\n      selected: null,\n      color: \" \",\n      displayColorPicker: false\n    };\n\n    _this.handleReceivedIdeaEvent = function (_ref) {\n      var event = _ref.event,\n          idea = _ref.idea;\n\n      switch (event) {\n        case 'created':\n          if (!_this.state.ideas.map(function (i) {\n            return i.id;\n          }).includes(idea.id)) {\n            _this.setState({\n              ideas: [].concat(_toConsumableArray(_this.state.ideas), [idea])\n            });\n          }\n\n          break;\n\n        case 'updated':\n          _this.setState(function (prevState) {\n            var index = prevState.ideas.map(function (i) {\n              return i.id;\n            }).indexOf(idea.id);\n            var ideas = update(prevState.ideas, _defineProperty({}, index, {\n              $set: idea\n            }));\n            return {\n              ideas: ideas\n            };\n          });\n\n          break;\n\n        default:\n          console.warn(\"Unhandled event type\");\n      }\n    };\n\n    _this.addNewIdea = function () {\n      axios.post('http://localhost:3001/api/v1/ideas', {\n        idea: {\n          title: '',\n          body: '',\n          color: ''\n        }\n      }).then(function (response) {\n        var ideas = update(_this.state.ideas, {\n          $push: [response.data]\n        });\n\n        _this.setState({\n          ideas: ideas,\n          editingIdeaID: response.data.id\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    };\n\n    _this.updateIdea = function (idea) {\n      var ideaIndex = _this.state.ideas.findIndex(function (x) {\n        return x.id === idea.id;\n      });\n\n      var ideas = update(_this.state.ideas, _defineProperty({}, ideaIndex, {\n        $set: idea\n      }));\n\n      _this.setState({\n        ideas: ideas\n      });\n\n      _this.props.onChange(\"All changes saved\");\n\n      _this.props.setTransitionIn(true);\n\n      _this.sub.send({\n        ideas: idea.target.value,\n        id: idea.id\n      });\n    };\n\n    _this.deleteIdea = function (id) {\n      axios.delete(\"http://localhost:3001/api/v1/ideas/\".concat(id)).then(function (response) {\n        var ideaIndex = _this.state.ideas.findIndex(function (x) {\n          return x.id === id;\n        });\n\n        var ideas = update(_this.state.ideas, {\n          $splice: [[ideaIndex, 1]]\n        });\n\n        _this.setState({\n          ideas: ideas\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    };\n\n    _this.enableEditing = function (id) {\n      _this.setState({\n        editingIdeaID: id\n      }, function () {\n        _this.title.focus();\n      });\n    };\n\n    _this.handleClick = function () {\n      _this.setState({\n        displayColorPicker: !_this.state.displayColorPicker\n      });\n    };\n\n    _this.handleEditing = function (id) {\n      _this.setState({\n        editingTitleID: id\n      });\n    };\n\n    _this.closeBox = function () {\n      setTimeout(function () {\n        _this.setState({\n          displayColorPicker: false\n        });\n      }, 200);\n    };\n\n    _this.changeColor = function (color) {\n      _this.setState({\n        color: color\n      });\n    };\n\n    _this.handleChangeStateColor = function (color) {\n      console.log(color);\n    };\n\n    _this.references = new Map();\n    _this.selected = _this.selected.bind(_assertThisInitialized(_this));\n    _this.handleReceivedIdeaEvent = _this.handleReceivedIdeaEvent.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(IdeasContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('http://localhost:3001/api/v1/ideas.json').then(function (response) {\n        _this2.setState({\n          ideas: response.data\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  }, {\n    key: \"selected\",\n    value: function selected(e) {\n      var selectedRef = this.references.get(e);\n      this.setState({\n        selected: selectedRef,\n        displayColorPicker: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var ideas = this.state.ideas.map(function (idea) {\n        return React.createElement(Idea, {\n          color: _this3.state.color,\n          closeBox: _this3.closeBox,\n          className: \"tile\",\n          idea: idea,\n          key: \"\".concat(idea.id, \"-\").concat(idea.updated_at),\n          handleChangeStateColor: _this3.handleChangeStateColor,\n          updateIdea: _this3.updateIdea,\n          titleRef: function titleRef(input) {\n            return _this3.title = input;\n          },\n          resetNotification: _this3.props.resetNotification,\n          onDelete: _this3.deleteIdea,\n          onChangeComplete: _this3.handleChangeComplete,\n          ref: function ref(c) {\n            return _this3.references.set(idea.id, c);\n          },\n          onClick: function onClick() {\n            _this3.enableEditing && _this3.selected(idea.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        });\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(ActionCable, {\n        channel: {\n          channel: 'IdeasChannel'\n        },\n        onReceived: this.handleReceivedIdeaEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"main-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"board-title\",\n        onClick: this.handleEditing,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"newideabtn-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"color-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: this.handleUnselect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(Color, {\n        changeColor: this.changeColor,\n        className: \"color-div\",\n        selected: this.state.selected,\n        color: this.state.color,\n        displayColorPicker: this.state.displayColorPicker,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"pretty-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, ideas), React.createElement(\"button\", {\n        className: \"newIdeaButton\",\n        onClick: this.addNewIdea,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"+\"));\n    }\n  }]);\n\n  return IdeasContainer;\n}(Component);\n\nexport default IdeasContainer;","map":{"version":3,"sources":["/Users/JesonLeejunzhen/ideaclone/ideaboard/src/components/IdeasContainer.js"],"names":["React","Component","axios","Idea","update","Color","ActionCable","IdeasContainer","props","state","ideas","editingIdeaID","editingTitleID","notification","selected","color","displayColorPicker","handleReceivedIdeaEvent","event","idea","map","i","id","includes","setState","prevState","index","indexOf","$set","console","warn","addNewIdea","post","title","body","then","response","$push","data","catch","error","log","updateIdea","ideaIndex","findIndex","x","onChange","setTransitionIn","sub","send","target","value","deleteIdea","delete","$splice","enableEditing","focus","handleClick","handleEditing","closeBox","setTimeout","changeColor","handleChangeStateColor","references","Map","bind","get","e","selectedRef","updated_at","input","resetNotification","handleChangeComplete","c","set","channel","handleUnselect"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport Idea from './Idea'\nimport update from 'immutability-helper'\nimport Color from './Color'\nimport { ActionCable } from 'react-actioncable-provider';\n\nclass IdeasContainer extends Component {\n  state =  {\n    ideas: [] ,\n    editingIdeaID: null,\n    editingTitleID: null,\n    notification: '',\n    selected: null,\n    color: \" \",\n    displayColorPicker: false\n  }\n\n  constructor(props) {\n    super(props)\n    this.references = new Map()\n    this.selected = this.selected.bind(this)\n    this.handleReceivedIdeaEvent = this.handleReceivedIdeaEvent.bind(this)\n  }\n\n  componentDidMount() {\n   axios.get('http://localhost:3001/api/v1/ideas.json')\n    .then(response => { this.setState({ ideas: response.data }) })\n    .catch(error => console.log(error))\n  }\n\n   handleReceivedIdeaEvent = ({ event, idea }) => {\n    switch(event) {\n      case 'created':\n        if (!this.state.ideas.map(i => i.id).includes(idea.id)) {\n          this.setState({ ideas: [...this.state.ideas, idea] })\n        }\n        break\n      case 'updated':\n        this.setState(prevState => {\n          const index = prevState.ideas.map(i => i.id).indexOf(idea.id)\n          const ideas = update(prevState.ideas, {[index]: {$set: idea}})\n          return { ideas }\n        })\n        break\n      default:\n        console.warn(\"Unhandled event type\")\n    }\n  }\n\n  addNewIdea = () => {\n    axios.post(\n      'http://localhost:3001/api/v1/ideas',\n      {\n        idea: {\n          title: '',\n          body: '',\n          color: ''\n        }\n      }\n    )\n    .then(response => {\n      const ideas = update(this.state.ideas, {$push: [response.data]})\n      this.setState({ideas: ideas, editingIdeaID: response.data.id})\n    })\n    .catch(error => console.log(error))\n  }\n\n  updateIdea = (idea) => {\n    const ideaIndex = this.state.ideas.findIndex(x => x.id === idea.id)\n    const ideas = update(this.state.ideas, {[ideaIndex]: {$set:idea}})\n    this.setState({ideas: ideas})\n\n    this.props.onChange(\"All changes saved\");\n    this.props.setTransitionIn(true)\n    this.sub.send({ ideas: idea.target.value, id: idea.id})\n  }\n\n  deleteIdea = (id) => {\n    axios.delete(`http://localhost:3001/api/v1/ideas/${id}`)\n    .then(response => {\n      const ideaIndex = this.state.ideas.findIndex(x => x.id === id)\n      const ideas = update(this.state.ideas, { $splice: [[ideaIndex, 1]]})\n      this.setState({ideas: ideas})\n    })\n    .catch(error => console.log(error))\n  }\n\n  enableEditing = (id) => {\n    this.setState({editingIdeaID: id}, () => {this.title.focus() })\n  }\n\n  // color\n\n  handleClick = () => {\n    this.setState({ displayColorPicker: !this.state.displayColorPicker })\n  };\n\n  selected(e) {\n    let selectedRef = this.references.get(e)\n    this.setState({ selected: selectedRef, displayColorPicker: true })\n  }\n\n  handleEditing = (id) => {\n    this.setState({editingTitleID: id})\n  }\n\n  closeBox = () => {\n    setTimeout(() => {\n      this.setState({ displayColorPicker: false })\n    }, 200);\n  }\n  changeColor = (color) => {\n    this.setState({color});\n  }\n\n  handleChangeStateColor = (color) => {\n    console.log(color)\n  }\n\n  render() {\n    const ideas = this.state.ideas.map((idea) => {\n      return(\n        <Idea\n          color={this.state.color}\n          closeBox={ this.closeBox }\n          className=\"tile\"\n          idea={idea}\n          key={`${idea.id}-${idea.updated_at}`}\n          handleChangeStateColor={this.handleChangeStateColor}\n          updateIdea={this.updateIdea}\n          titleRef = {input => this.title = input}\n          resetNotification={this.props.resetNotification}\n          onDelete={this.deleteIdea}\n          onChangeComplete={ this.handleChangeComplete }\n          ref = {c => this.references.set(idea.id, c)}\n          onClick={() => {this.enableEditing && this.selected(idea.id)}}\n        />\n      )\n    })\n\n    return (\n      <div>\n        <ActionCable\n          channel={{channel: 'IdeasChannel'}}\n          onReceived={this.handleReceivedIdeaEvent}\n        />\n\n        <div className=\"main-div\">\n          <div className=\"board-title\" onClick={this.handleEditing}>\n          </div>\n          <div className=\"newideabtn-div\">\n          </div>\n          <div className=\"color-div\">\n            <div onClick={ this.handleUnselect }/>\n            <Color\n              changeColor={this.changeColor}\n              className=\"color-div\"\n              selected={this.state.selected}\n              color={this.state.color}\n              displayColorPicker={this.state.displayColorPicker}\n            />\n          </div>\n\n          <div className=\"pretty-div\"></div>\n        </div>\n\n        <div>\n          {ideas}\n        </div>\n\n        <button className= \"newIdeaButton\" onClick={this.addNewIdea}>+</button>\n      </div>\n    )\n  }\n}\n\nexport default IdeasContainer\n"]},"metadata":{},"sourceType":"module"}